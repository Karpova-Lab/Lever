<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Using #  pyControl #  This lever works with the pyControl behavior framework. Specifically, this means that the RJ45 pinout is compatible with pyControl. Using an ethernet cable, you can connect the lever to an original breakout board or a D-series breakout board.
Example task #   Note For the example to work, _lever.py  must be downloaded and placed in your devices folder. Then after connecting to you pyboard, use the &ldquo;config&rdquo; button to &ldquo;Load framework&rdquo;.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="Using #  pyControl #  This lever works with the pyControl behavior framework. Specifically, this means that the RJ45 pinout is compatible with pyControl. Using an ethernet cable, you can connect the lever to an original breakout board or a D-series breakout board.
Example task #   Note For the example to work, _lever.py  must be downloaded and placed in your devices folder. Then after connecting to you pyboard, use the &ldquo;config&rdquo; button to &ldquo;Load framework&rdquo;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://karpova-lab.github.io/Lever/docs/using/" /><meta property="article:section" content="docs" />



<title>Using | Lever</title>
<link rel="manifest" href="/Lever/manifest.json">
<link rel="icon" href="/Lever/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/Lever/book.min.01b0771bbeccf07610a3fe838d7b05dd5e2c05fb4c879f2a205d7bae9d05181a.css" integrity="sha256-AbB3G77M8HYQo/6DjXsF3V4sBftMh58qIF17rp0FGBo=" crossorigin="anonymous"><!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <script src="https://kit.fontawesome.com/622646117d.js" crossorigin="anonymous"></script>
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/Lever/"><span>Lever</span>
  </a>
</h2>




<div style="border-top: 1px solid #d3d3d3; padding-top:10px; width: 75%;"></div>







  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://karpova-lab.github.io/Lever/docs/building/" class="">Building</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://karpova-lab.github.io/Lever/docs/using/" class=" active">Using</a>
  

        </li>
      
    
  </ul>














<div style="border-top: 1px solid #d3d3d3; padding-top:20px; width: 75%;">
</div>
<a href="https://github.com/Karpova-Lab/lever" class="btn-external issue">
    <i class="fab fa-github"></i>
      GitHub Repository
</a>
<br>

<p class="github_text">Questions? Feedback? Ideas?</p>
<a href="https://github.com/Karpova-Lab/lever/discussions" class="btn-external issue">
    <i class="fas fa-comments"></i>   Add to discussions
</a>

<p class="github_text">Corrections?</p>
<a href="https://github.com/Karpova-Lab/lever/issues/new" class="btn-external issue">
    <i class="fas fa-edit"></i> Submit an issue 
</a>
</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/Lever/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <label for="toc-control">
    
    <img src="/Lever/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#using">Using</a>
      <ul>
        <li><a href="#pycontrol">pyControl</a></li>
        <li><a href="#example-task">Example task</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="using">
  Using
  <a class="anchor" href="#using">#</a>
</h1>
<h2 id="pycontrol">
  pyControl
  <a class="anchor" href="#pycontrol">#</a>
</h2>
<p>This lever works with the <a href="https://pycontrol.readthedocs.io/en/latest/">pyControl</a> behavior framework.
Specifically, this means that the RJ45 <a href="https://pycontrol.readthedocs.io/en/latest/user-guide/hardware/#behaviour-ports">pinout</a> is compatible with pyControl.
Using an ethernet cable, you can connect the lever to an <a href="https://open-ephys.org/pycontrol/pycontrol">original breakout board</a>  or a <a href="https://karpova-lab.github.io/pyControl-D-Series-Breakout/index.html">D-series breakout board</a>.</p>
<h2 id="example-task">
  Example task
  <a class="anchor" href="#example-task">#</a>
</h2>
<blockquote class="book-hint info">
  <h3 id="i-classfas-fa-info-circlei-note"><i class="fas fa-info-circle"></i> Note</h3>
<p>For the example to work,  <a href="_lever.py" download > <i class="fa fa-download"></i>_lever.py </a> must be downloaded and placed in your <code>devices</code> folder.
Then after connecting to you pyboard, use the &ldquo;config&rdquo; button to &ldquo;Load framework&rdquo;.
This will transfer the device files, including _lever.py, from your computer onto the pyboard microcontroller.
</blockquote>

<p>Below is an example task you can run to test the lever.
The task assumes a lever is connected to <strong>port 1</strong> of your breakout board.</p>
<p>When the task starts, the lever will extend.
Pressing the extended lever 3 times will cause the lever to retract.
After 1 second, the lever will extend again.
The number of presses required and the duration of the retraction are variables that can be adjusted.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020;font-weight:bold">from</span> <span style="color:#0e84b5;font-weight:bold">pyControl.utility</span> <span style="color:#007020;font-weight:bold">import</span> <span style="color:#666">*</span>
<span style="color:#007020;font-weight:bold">from</span> <span style="color:#0e84b5;font-weight:bold">devices</span> <span style="color:#007020;font-weight:bold">import</span> <span style="color:#666">*</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">pyControl.hardware</span> <span style="color:#007020;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">_h</span>

<span style="color:#60a0b0;font-style:italic">## uncomment one of the following two lines depending out which breakout board you are using</span>
board <span style="color:#666">=</span> Breakout_1_2()  <span style="color:#60a0b0;font-style:italic"># original pyboard breakout</span>
<span style="color:#60a0b0;font-style:italic"># board = Breakout_dseries_1_6()  # d-series pyboard breakout</span>

lever <span style="color:#666">=</span> Lever(board<span style="color:#666">.</span>port_1, lever_event<span style="color:#666">=</span><span style="color:#4070a0">&#34;lever&#34;</span>)

states <span style="color:#666">=</span> [<span style="color:#4070a0">&#34;available&#34;</span>, <span style="color:#4070a0">&#34;retracted&#34;</span>]
events <span style="color:#666">=</span> [<span style="color:#4070a0">&#34;lever&#34;</span>, <span style="color:#4070a0">&#34;extend_again&#34;</span>]

v<span style="color:#666">.</span>press_count___ <span style="color:#666">=</span> <span style="color:#40a070">0</span>
v<span style="color:#666">.</span>retract_time_ms <span style="color:#666">=</span> <span style="color:#40a070">1000</span>
v<span style="color:#666">.</span>required_presses <span style="color:#666">=</span> <span style="color:#40a070">3</span>
initial_state <span style="color:#666">=</span> <span style="color:#4070a0">&#34;available&#34;</span>


<span style="color:#007020;font-weight:bold">def</span> <span style="color:#06287e">available</span>(event):
    <span style="color:#007020;font-weight:bold">if</span> event <span style="color:#666">==</span> <span style="color:#4070a0">&#34;entry&#34;</span>:
        lever<span style="color:#666">.</span>extend()
        v<span style="color:#666">.</span>press_count___ <span style="color:#666">=</span> <span style="color:#40a070">0</span>
    <span style="color:#007020;font-weight:bold">elif</span> event <span style="color:#666">==</span> <span style="color:#4070a0">&#34;lever&#34;</span>:
        v<span style="color:#666">.</span>press_count___ <span style="color:#666">+=</span> <span style="color:#40a070">1</span>
        <span style="color:#007020;font-weight:bold">if</span> v<span style="color:#666">.</span>press_count___ <span style="color:#666">==</span> v<span style="color:#666">.</span>required_presses:
            goto_state(<span style="color:#4070a0">&#34;retracted&#34;</span>)


<span style="color:#007020;font-weight:bold">def</span> <span style="color:#06287e">retracted</span>(event):
    <span style="color:#007020;font-weight:bold">if</span> event <span style="color:#666">==</span> <span style="color:#4070a0">&#34;entry&#34;</span>:
        lever<span style="color:#666">.</span>retract()
        set_timer(<span style="color:#4070a0">&#34;extend_again&#34;</span>, v<span style="color:#666">.</span>retract_time_ms)
    <span style="color:#007020;font-weight:bold">elif</span> event <span style="color:#666">==</span> <span style="color:#4070a0">&#34;extend_again&#34;</span>:
        goto_state(<span style="color:#4070a0">&#34;available&#34;</span>)

</code></pre></div><p>For more information on writing your own tasks, refer to the  <a href="https://pycontrol.readthedocs.io/en/latest/user-guide/programming-tasks/">pyControl documentation</a>.</p>



<a class="btn-nav prev" href= https://karpova-lab.github.io/Lever/docs/building/>
    <i style="font-size: 1rem;">previous</i><br><i class="fas fa-arrow-left"></i> Building</i>
</a>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#using">Using</a>
      <ul>
        <li><a href="#pycontrol">pyControl</a></li>
        <li><a href="#example-task">Example task</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












